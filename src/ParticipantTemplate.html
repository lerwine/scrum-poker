<!doctype html>

<html>
  <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script data-require="angularjs@1.6.2" data-semver="1.6.2" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.2/angular.js"></script>
    <link rel="stylesheet" href="lib/style.css">
    <script src="lib/script.js"></script>
  </head>

  <body class="container" ng-app="scrumPokerApp" ng-controller="sessionController">
    <div class="card">
        <div class="card-header">Current Session</div>
        <div class="card-body">
            <h5 class="card-title text-center">{{title}}</h5>
            <div class="container ">
                <div class="row ">
                    <div class="col fw-bold text-center">Presenter Name</div>
                    <div class="col fw-bold text-center">Your Name</div>
                </div>
                <div class="row">
                    <div class="col text-center">{{presenterName}}</div>
                    <div class="col text-center">{{currentParticipant.name}}</div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">Points</div>
                <div class="card-body">
                    <div class="container">
                        <div class="row">
                            <div class="col fw-bold">Sprint</div>
                            <div class="col fw-bold">Planned</div>
                            <div class="col fw-bold">Remaining</div>
                        </div>
                        <div class="row">
                            <div class="col">{{sprintPoints}}</div>
                            <div class="col">{{plannedPoints}}</div>
                            <div class="col">{{remainingPoints}}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card mt-3">
        <div class="card-header">Current User Story</div>
        <div class="card-body">
            <h5 class="card-title">{{currentStory.title}}</h5>
            <p class="card-text">{{currentStory.description}}</p>
            <p class="card-text text-muted" ng-show="story.notes">{{currentStory.notes}}</p>
            <div class="container">
                <div class="row">
                    <div class="col-3 text-center border" ng-repeat="participant in allParticipants">
                        <h5>{{participant.name}} ({{participant.assignedPoints}})</h5>
                        <div class="overflow-hidden" style="height:62px" ng-show="participant.selectedCard">
                            <img src="{{participant.selectedCard.url}}" width="62" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="card mt-3">
                <div class="card-header">Your Selection</div>
                <div class="card-body">
                    <p class="card-text">{{instructions}}</p>
                </div>
                <form>
                    <div class="text-center" ng-show="selectedCard">
                        <label>Selected Card:</label>
                        <img src="{{selectedCard.url}}" width="124px" height="174px" />
                        <button type="button" class="btn btn-primary" ng-hide="currentParticipant.selectionFinalized" ng-click="finalizeVote()">Finalize</button>
                    </div>
                    <div class="mb-3" ng-show="selectedCard">
                      <label for="explanationTextarea" class="form-label">Explanation</label>
                      <textarea class="form-control" id="explanationTextarea" rows="3" ng-disabled="currentParticipant.selectionFinalized"></textarea>
                    </div>
                    <div class="grid" style="row-gap: 0; column-gap: 0" ng-hide="currentParticipant.selectionFinalized">
                        <img src="{{c.url}}" ng-repeat="c in cardDeck" width="62" height="87" ng-click="pickCard(c)" />
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="card mt-3">
        <div class="card-header">All Stories</div>
        <div class="accordion" id="allStoriesAccordion">
            <div class="accordion-item" ng-repeat="story in userStories">
              <h2 class="accordion-header" id="userStoryHeading{{story.id}}">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="false" data-bs-target="#userStoryContent{{story.id}}" aria-controls="userStoryContent{{story.id}}">
                    {{story.title}}
                </button>
              </h2>
              <div id="userStoryContent{{story.id}}" class="accordion-collapse collapse show" aria-labelledby="userStoryHeading{{story.id}}" data-bs-parent="#allStoriesAccordion">
                <div class="accordion-body">
                  <strong>{{story.description}}</strong>
                  <div ng-show="story.notes">{{story.notes}}</div>
                  <img src="{{story.result.url}}" width="124px" height="174px" ng-show="story.result" />
                  <div ng-show="story.assignedTo">
                    <strong>Assigned To:</strong>
                    {{story.assignedTo.name}}
                  </div>
                </div>
              </div>
            </div>
        </div>
    </div>
  </body>
</html>
